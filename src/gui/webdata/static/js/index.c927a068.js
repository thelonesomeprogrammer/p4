(()=>{"use strict";var e={247:function(e,r,t){var s=t(893),n=t(294),l=t(745);let i=e=>{let{onAddProgram:r,cords:t,link:l}=e,[i,o]=(0,n.useState)("");return(0,s.jsxs)("div",{className:"modal",children:[(0,s.jsx)("h3",{children:"General Data And Control"}),(0,s.jsxs)("div",{className:"data_div",children:[(0,s.jsx)("p",{children:"cf link:"}),(0,s.jsx)("p",{id:"link",children:l}),(0,s.jsx)("p",{children:"cf position:"}),(0,s.jsx)("p",{id:"cords",children:t}),(0,s.jsx)("p",{children:"add setpoint:"}),(0,s.jsxs)("div",{className:"input_div",children:[(0,s.jsx)("input",{name:"req",id:"req",type:"text",value:i,onChange:e=>o(e.target.value)}),(0,s.jsx)("button",{onClick:()=>{i.trim()?(r(i.trim()),o("")):alert("Setpoint cannot be empty")},children:"+"})]}),(0,s.jsx)("label",{htmlFor:"file",children:"setpoint save file:"}),(0,s.jsx)("input",{type:"file",name:"file",id:"file",onChange:e=>{let t=e.target.files[0],s=new FileReader;s.onload=function(){this.result.split("\n").forEach(e=>{e.trim()&&r(e.trim())})},s.readAsText(t)}})]})]})},o=e=>{let{program:r,onRemove:t,onSend:n}=e;return(0,s.jsxs)("li",{children:[(0,s.jsx)("p",{children:r}),(0,s.jsx)("button",{className:"send_button",onClick:n,children:"send"}),(0,s.jsx)("button",{className:"rm_button",onClick:t,children:"X"})]})},a=e=>{let{programs:r,setPrograms:t}=e,n=e=>{t(r.filter((r,t)=>t!==e))},l=e=>{fetch("/api/control",{method:"POST",body:e}).then(r=>console.log("Sent:",e)).catch(e=>console.error("Error sending program:",e))};return(0,s.jsxs)("div",{className:"program_container modal",children:[(0,s.jsx)("h3",{children:"Saved Set Points"}),(0,s.jsx)("div",{className:"program_div",children:(0,s.jsx)("ul",{id:"list",className:"program_list",children:r.map((e,r)=>(0,s.jsx)(o,{program:e,onRemove:()=>n(r),onSend:()=>l(e)},r))})})]})};var d=t(93),c=t(650);c.kL.register(c.jn,c.uw,c.f$,c.od,c.De,c.u);let h=e=>{let{data:r,timestamps:t}=e,n={labels:t,datasets:[{label:"X Position",data:r.x,borderColor:"rgb(255, 99, 132)",backgroundColor:"rgba(255, 99, 132, 0.5)",fill:!1},{label:"Y Position",data:r.y,borderColor:"rgb(54, 162, 235)",backgroundColor:"rgba(54, 162, 235, 0.5)",fill:!1},{label:"Z Position",data:r.z,borderColor:"rgb(75, 192, 192)",backgroundColor:"rgba(75, 192, 192, 0.5)",fill:!1}]};return(0,s.jsxs)("div",{className:"graph_div modal",children:[(0,s.jsx)("h3",{children:"Position Data"}),(0,s.jsx)(d.x1,{data:n,options:{responsive:!0,plugins:{legend:{position:"top"}},scales:{x:{title:{display:!0,text:"Time"}},y:{title:{display:!0,text:"Position"}}}}})]})},p=()=>{let[e,r]=(0,n.useState)([]),[t,l]=(0,n.useState)("unknown"),[o,d]=(0,n.useState)("unknown"),[c,p]=(0,n.useState)({x:[],y:[],z:[]}),[u,x]=(0,n.useState)([]);return(0,n.useEffect)(()=>{let e=setInterval(async()=>{try{let e=await fetch("http://localhost:8000/api/streams");if(!e.ok)throw Error("Network response was not ok");let r=(await e.text()).split("link:");d(r[0]||"unknown"),l(r[1]||"unknown");let t=r[0].split("x:")[1].split(";")[0],s=r[0].split("y:")[1].split(";")[0],n=r[0].split("z:")[1].split(";")[0];p(e=>({x:[...e.x.slice(-50),parseFloat(t)],y:[...e.y.slice(-50),parseFloat(s)],z:[...e.z.slice(-50),parseFloat(n)]})),x(e=>[...e.slice(-50),new Date().toLocaleTimeString()])}catch(e){console.error("Fetch error:",e)}},1e3);return()=>clearInterval(e)},[]),(0,s.jsxs)("main",{children:[(0,s.jsx)("h1",{children:"Drone Control Dashboard"}),(0,s.jsxs)("div",{className:"main_div",children:[(0,s.jsx)("div",{children:(0,s.jsx)(i,{onAddProgram:t=>{r([...e,t])},link:t,cords:o})}),(0,s.jsx)("div",{children:(0,s.jsx)(a,{programs:e,setPrograms:r})}),(0,s.jsx)("div",{children:(0,s.jsx)(h,{data:c,timestamps:u})})]})]})};l.createRoot(document.getElementById("root")).render((0,s.jsx)(n.StrictMode,{children:(0,s.jsx)(()=>(0,s.jsx)("div",{className:"content",children:(0,s.jsx)(p,{})}),{})}))}},r={};function t(s){var n=r[s];if(void 0!==n)return n.exports;var l=r[s]={exports:{}};return e[s](l,l.exports,t),l.exports}t.m=e,t.d=(e,r)=>{for(var s in r)t.o(r,s)&&!t.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:r[s]})},t.o=(e,r)=>Object.prototype.hasOwnProperty.call(e,r),(()=>{var e=[];t.O=(r,s,n,l)=>{if(s){l=l||0;for(var i=e.length;i>0&&e[i-1][2]>l;i--)e[i]=e[i-1];e[i]=[s,n,l];return}for(var o=1/0,i=0;i<e.length;i++){for(var[s,n,l]=e[i],a=!0,d=0;d<s.length;d++)(!1&l||o>=l)&&Object.keys(t.O).every(e=>t.O[e](s[d]))?s.splice(d--,1):(a=!1,l<o&&(o=l));if(a){e.splice(i--,1);var c=n();void 0!==c&&(r=c)}}return r}})(),t.rv=()=>"1.3.8",(()=>{var e={980:0};t.O.j=r=>0===e[r];var r=(r,s)=>{var n,l,[i,o,a]=s,d=0;if(i.some(r=>0!==e[r])){for(n in o)t.o(o,n)&&(t.m[n]=o[n]);if(a)var c=a(t)}for(r&&r(s);d<i.length;d++)l=i[d],t.o(e,l)&&e[l]&&e[l][0](),e[l]=0;return t.O(c)},s=self.webpackChunkdashboard=self.webpackChunkdashboard||[];s.forEach(r.bind(null,0)),s.push=r.bind(null,s.push.bind(s))})(),t.ruid="bundler=rspack@1.3.8";var s=t.O(void 0,["361","352"],function(){return t(247)});s=t.O(s)})();