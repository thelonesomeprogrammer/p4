(()=>{"use strict";var e={247:function(e,t,r){var n=r(893),l=r(294),o=r(745);let s=e=>{let{onAddProgram:t,cords:r,link:o}=e,[s,a]=(0,l.useState)("");return(0,n.jsxs)("div",{className:"modal",children:[(0,n.jsx)("h3",{children:"General Data And Control"}),(0,n.jsxs)("div",{className:"data_div",children:[(0,n.jsx)("p",{children:"cf link:"}),(0,n.jsx)("p",{id:"link",children:o}),(0,n.jsx)("p",{children:"cf position:"}),(0,n.jsx)("p",{id:"cords",children:r}),(0,n.jsx)("p",{children:"add setpoint:"}),(0,n.jsxs)("div",{className:"input_div",children:[(0,n.jsx)("input",{name:"req",id:"req",type:"text",value:s,onChange:e=>a(e.target.value)}),(0,n.jsx)("button",{type:"button",onClick:()=>{s.trim()?(t(s.trim()),a("")):alert("Setpoint cannot be empty")},children:"+"})]}),(0,n.jsx)("label",{htmlFor:"file",children:"setpoint save file:"}),(0,n.jsx)("input",{type:"file",name:"file",id:"file",onChange:e=>{let r=e.target.files[0],n=new FileReader;n.onload=function(){for(line of this.result.split("\n"))line.trim()&&t(line.trim())},n.readAsText(r)}})]})]})},a=e=>{let{program:t,onRemove:r,onSend:l}=e;return(0,n.jsxs)("li",{children:[(0,n.jsx)("p",{children:t}),(0,n.jsx)("button",{type:"button",className:"send_button",onClick:l,children:"send"}),(0,n.jsx)("button",{type:"button",className:"rm_button",onClick:r,children:"X"})]})},i=e=>{let{programs:t,setPrograms:r}=e,l=e=>{r(t.filter((t,r)=>r!==e))},o=e=>{fetch("/api/control",{method:"POST",body:e}).then(t=>console.log("Sent:",e)).catch(e=>console.error("Error sending program:",e))},s=()=>{fetch("/api/control",{method:"POST",body:"launch"}).then(e=>console.log("Sent launch command")).catch(e=>console.error("Error sending launch command:",e))},i=()=>{fetch("/api/control",{method:"POST",body:"land"}).then(e=>console.log("Sent land command")).catch(e=>console.error("Error sending land command:",e))};return(0,n.jsxs)("div",{className:"program_container modal",children:[(0,n.jsx)("h3",{children:"Saved Set Points"}),(0,n.jsx)("div",{className:"program_div",children:(0,n.jsx)("ul",{id:"list",className:"program_list",children:t.map((e,t)=>(0,n.jsx)(a,{program:e,onRemove:()=>l(t),onSend:()=>o(e)},e))})}),(0,n.jsxs)("div",{className:"button_div",children:[(0,n.jsx)("button",{type:"button",className:"clear_but",onClick:()=>r([]),children:"Clear All"}),(0,n.jsx)("button",{type:"button",className:"launch_but",onClick:()=>s(),children:"launch"}),(0,n.jsx)("button",{type:"button",className:"land_but",onClick:()=>i(),children:"land"})]})]})};var d=r(93),c=r(650);c.kL.register(c.jn,c.uw,c.f$,c.od,c.De,c.u);let h=e=>{let{data:t,timestamps:r}=e,l={labels:r,datasets:[{label:"X Position",data:t.x,borderColor:"rgb(255, 99, 132)",backgroundColor:"rgba(255, 99, 132, 0.5)",fill:!1},{label:"Y Position",data:t.y,borderColor:"rgb(54, 162, 235)",backgroundColor:"rgba(54, 162, 235, 0.5)",fill:!1},{label:"Z Position",data:t.z,borderColor:"rgb(75, 192, 192)",backgroundColor:"rgba(75, 192, 192, 0.5)",fill:!1}]};return(0,n.jsxs)("div",{className:"graph_div modal",children:[(0,n.jsx)("h3",{children:"Position Data"}),(0,n.jsx)(d.x1,{data:l,options:{responsive:!0,plugins:{legend:{position:"top"}},scales:{x:{title:{display:!0,text:"Time"}},y:{title:{display:!0,text:"Position"}}}}})]})},u=()=>{let[e,t]=(0,l.useState)([]),[r,o]=(0,l.useState)("unknown"),[a,d]=(0,l.useState)("unknown"),[c,u]=(0,l.useState)({x:[],y:[],z:[]}),[p,m]=(0,l.useState)([]);return(0,l.useEffect)(()=>{let e=setInterval(async()=>{try{let e=await fetch("http://localhost:8000/api/streams");if(!e.ok)throw Error("Network response was not ok");let t=(await e.text()).split("link:");d(t[0]||"unknown"),o(t[1]||"unknown");let r=t[0].split("x:")[1].split(";")[0],n=t[0].split("y:")[1].split(";")[0],l=t[0].split("z:")[1].split(";")[0];u(e=>({x:[...e.x.slice(-50),Number.parseFloat(r)],y:[...e.y.slice(-50),Number.parseFloat(n)],z:[...e.z.slice(-50),Number.parseFloat(l)]})),m(e=>[...e.slice(-50),new Date().toLocaleTimeString()])}catch(e){console.error("Fetch error:",e)}},1e3);return()=>clearInterval(e)},[]),(0,n.jsxs)("main",{children:[(0,n.jsx)("h1",{children:"Drone Control Dashboard"}),(0,n.jsxs)("div",{className:"main_div",children:[(0,n.jsx)("div",{children:(0,n.jsx)(s,{onAddProgram:r=>{t([...e,r])},link:r,cords:a})}),(0,n.jsx)("div",{children:(0,n.jsx)(i,{programs:e,setPrograms:t})}),(0,n.jsx)("div",{children:(0,n.jsx)(h,{data:c,timestamps:p})})]})]})};o.createRoot(document.getElementById("root")).render((0,n.jsx)(l.StrictMode,{children:(0,n.jsx)(()=>(0,n.jsx)("div",{className:"content",children:(0,n.jsx)(u,{})}),{})}))}},t={};function r(n){var l=t[n];if(void 0!==l)return l.exports;var o=t[n]={exports:{}};return e[n](o,o.exports,r),o.exports}r.m=e,r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e=[];r.O=(t,n,l,o)=>{if(n){o=o||0;for(var s=e.length;s>0&&e[s-1][2]>o;s--)e[s]=e[s-1];e[s]=[n,l,o];return}for(var a=1/0,s=0;s<e.length;s++){for(var[n,l,o]=e[s],i=!0,d=0;d<n.length;d++)(!1&o||a>=o)&&Object.keys(r.O).every(e=>r.O[e](n[d]))?n.splice(d--,1):(i=!1,o<a&&(a=o));if(i){e.splice(s--,1);var c=l();void 0!==c&&(t=c)}}return t}})(),r.rv=()=>"1.3.8",(()=>{var e={980:0};r.O.j=t=>0===e[t];var t=(t,n)=>{var l,o,[s,a,i]=n,d=0;if(s.some(t=>0!==e[t])){for(l in a)r.o(a,l)&&(r.m[l]=a[l]);if(i)var c=i(r)}for(t&&t(n);d<s.length;d++)o=s[d],r.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return r.O(c)},n=self.webpackChunkdashboard=self.webpackChunkdashboard||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})(),r.ruid="bundler=rspack@1.3.8";var n=r.O(void 0,["361","352"],function(){return r(247)});n=r.O(n)})();